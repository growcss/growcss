# Directory structure

### Packages

The packages directory is where all of our public NPM src are contained. Each subfolder is broken down in to another directory that allows us to make running a subset of build tasks only for certain sets of src.

It may look something like:
```
└─ packages
  ├─ component
  ├─ component
  └─ ...
```

### Per-package structure

The structure leading to each package will look something like:
```
└─ packages
  └─ button
    ├─ dist ··········· Built files, autogenerated
    ├─ stories ········ Package-specific stories (Storiesbook)
    ├─ node_modules ··· NPM dependencies
    ├─ src ············ Package source
    ├─ CHANGELOG.md ··· Entire change history for the package
    ├─ index.js ······· Private entry point for tests
    ├─ LICENSE ········ Package license
    └─ package.json ··· NPM package configuration
```

The details of each directory in each package is explained in greater detail further down.

#### dist
The dist directory contains the bundles we ship to our NPM package. We ship both CommonJS and ES Modules to NPM.
```
└─ packages
  └─ button
    └─ dist
      ├─ cjs
      ├─ esm
      ├─ umd
      └─ package.json
```

#### stories
You find all info how to write a story on https://storybook.js.org/basics/writing-stories/

For React, we have been using Enzyme as a way to do structural testing, but now we can also use Jest’s snapshot testing to make things even more simple.

```
└─ packages
  └─ button
    └─ stories
      └─ index.stories.js
```
        
#### node_modules
This is where the NPM src are kept. Bolt will automatically populate this, you don't have to manually install the dependencies for each package.

#### src
Each package's source should contain a similar directory structure.
Essentially this rule follows the convention that anything that has a default export must be ```CamelCapped``` or ```camelCased```. Everything else is ```dash-cased```. This rule is expanded into the following that goes into greater detail about how certain things in the structure should look (i.e. styled-components / tests).

1. There must always be an ```index.js``` that exports your public API.
2. Each file that has a default export, must only have a default export - no named exports. This simplifies the heuristics to determine a name for the file.
3. The file name should be the name of the export. For example, if ```Button``` is a default export for a file, the file name should be ```Button.js```.
For a HoC, this might look something like ```withButton```.
4. In lieu of a file, you may use a directory with an ```index.js``` file. For example, ```Button/index.js```.
5. Styled components should go in a ```styled.js``` file, or you can use a ```styled/index.js``` file that exports sibling files with default exports that conform to #3 or #4. This should also follow something similar to #6 and have this for every level of components.
6. Tests should be in a ```__tests__``` folder that correspond to the root level.

Your structure may look something like this:

```
└─ packages
  └─ button
    └─ stories
      └─ index.stories.js ····· A visual story of the element
    └─ src
      ├─ __tests__ ············ Tests for Button.js, index.js, styled.js
      │  └─ __snapshots__       Directory for the storybook snapshots (optional)
      ├─ components············ Directory form of Button.js
      │  └─ Button.js ········· Default export for Button
      ├─ styled ··············· Directory for styled components
      │  └─ MyComponent.js ···· Exported MyComponent
      ├─ Button.js ············ Simpler form of components/Button.js
      └─ styled.js ············ Simpler form of styled/MyComponent.js
```
The key difference between the file and directory forms (i.e. ```styled.js``` vs ```styled/index.js```) is how complex your component becomes. What matters here is that consistency is still very close and your imports do not change.

The rules listed above are exhaustive. Anything outside of them are not supported. This includes things like leading underscores `_filename.js`, underscored names `file_name.js` and dotted names `file.name.js`.

#### CHANGELOG.md
The changelog contains all of the relevant changes of the package, over time, in an easy-to-consume format. It also is searchable from the website if you want the changes for a particular version.

#### index.js
This index.js file exists for Jest so that it can resolve the actual source of the package as opposed to having to build the entire set of packages prior to running tests.

#### LICENSE
The LICENSE file contains the license for each package.

#### package.json
The package.json file contains all the information and configuration that NPM needs to host our package.

#### README.md
The README.md file contains a introduction for each package.
